{"version":3,"file":"renderToStyleElements.esm.js","sources":["../../../packages/react/src/renderToStyleElements.ts"],"sourcesContent":["import { styleBucketOrdering } from '@griffel/core';\nimport * as React from 'react';\nimport type { GriffelRenderer } from '@griffel/core';\n\n/**\n * This method returns a list of <style> React elements with the rendered CSS. This is useful for Server-Side rendering.\n *\n * @public\n */\nexport function renderToStyleElements(renderer: GriffelRenderer): React.ReactElement[] {\n  const stylesheets = Object.values(renderer.stylesheets)\n    // first sort: bucket names\n    .sort((a, b) => {\n      return styleBucketOrdering.indexOf(a.bucketName) - styleBucketOrdering.indexOf(b.bucketName);\n    })\n    // second sort: media queries\n    .sort((a, b) => {\n      const mediaA = a.elementAttributes['media'];\n      const mediaB = b.elementAttributes['media'];\n\n      if (mediaA && mediaB) {\n        return renderer.compareMediaQueries(mediaA, mediaB);\n      }\n\n      if (mediaA || mediaB) {\n        return mediaA ? 1 : -1;\n      }\n\n      return 0;\n    });\n\n  return stylesheets\n    .map(stylesheet => {\n      const cssRules = stylesheet.cssRules();\n      // don't want to create any empty style elements\n      if (!cssRules.length) {\n        return null;\n      }\n\n      return React.createElement('style', {\n        key: stylesheet.bucketName,\n\n        // TODO: support \"nonce\"\n        // ...renderer.styleNodeAttributes,\n        ...stylesheet.elementAttributes,\n        'data-make-styles-rehydration': 'true',\n\n        dangerouslySetInnerHTML: {\n          __html: cssRules.join(''),\n        },\n      });\n    })\n    .filter(Boolean) as React.ReactElement[];\n}\n"],"names":["renderToStyleElements","renderer","stylesheets","Object","values","sort","a","b","styleBucketOrdering","indexOf","bucketName","mediaA","elementAttributes","mediaB","compareMediaQueries","map","stylesheet","cssRules","length","React","createElement","assign","key","dangerouslySetInnerHTML","__html","join","filter","Boolean"],"mappings":";;;AAIA;;;;AAIG;AACG,SAAUA,qBAAqBA,CAACC,QAAyB,EAAA;EAC7D,MAAMC,WAAW,GAAGC,MAAM,CAACC,MAAM,CAACH,QAAQ,CAACC,WAAW;AACpD;AAAA,GACCG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAI;AACb,IAAA,OAAOC,mBAAmB,CAACC,OAAO,CAACH,CAAC,CAACI,UAAU,CAAC,GAAGF,mBAAmB,CAACC,OAAO,CAACF,CAAC,CAACG,UAAU,CAAC;GAC7F;AACD;AAAA,GACCL,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAI;AACb,IAAA,MAAMI,MAAM,GAAGL,CAAC,CAACM,iBAAiB,CAAC,OAAO,CAAC;AAC3C,IAAA,MAAMC,MAAM,GAAGN,CAAC,CAACK,iBAAiB,CAAC,OAAO,CAAC;IAE3C,IAAID,MAAM,IAAIE,MAAM,EAAE;AACpB,MAAA,OAAOZ,QAAQ,CAACa,mBAAmB,CAACH,MAAM,EAAEE,MAAM,CAAC;AACrD;IAEA,IAAIF,MAAM,IAAIE,MAAM,EAAE;AACpB,MAAA,OAAOF,MAAM,GAAG,CAAC,GAAG,EAAE;AACxB;AAEA,IAAA,OAAO,CAAC;AACV,GAAC,CAAC;AAEJ,EAAA,OAAOT,WAAW,CACfa,GAAG,CAACC,UAAU,IAAG;AAChB,IAAA,MAAMC,QAAQ,GAAGD,UAAU,CAACC,QAAQ,EAAE;AACtC;AACA,IAAA,IAAI,CAACA,QAAQ,CAACC,MAAM,EAAE;AACpB,MAAA,OAAO,IAAI;AACb;IAEA,oBAAOC,KAAK,CAACC,aAAa,CAAC,OAAO,EAAAjB,MAAA,CAAAkB,MAAA,CAAA;MAChCC,GAAG,EAAEN,UAAU,CAACN;KAIbM,EAAAA,UAAU,CAACJ,iBAAiB,EAAA;AAC/B,MAAA,8BAA8B,EAAE,MAAM;AAEtCW,MAAAA,uBAAuB,EAAE;AACvBC,QAAAA,MAAM,EAAEP,QAAQ,CAACQ,IAAI,CAAC,EAAE;AACzB;AAAA,KAAA,CACF,CAAC;AACJ,GAAC,CAAC,CACDC,MAAM,CAACC,OAAO,CAAyB;AAC5C;;;;"}