{"version":3,"file":"hashPropertyKey.esm.js","sources":["../../../../../packages/core/src/runtime/utils/hashPropertyKey.ts"],"sourcesContent":["import hash from '@emotion/hash';\n\nimport type { PropertyHash } from '../../types';\nimport type { AtRules } from './types';\n\nfunction addAtRulePrefix(atRule: string, prefix: string): string {\n  return atRule ? prefix + atRule : atRule;\n}\n\nexport function atRulesToString(atRules: AtRules): string {\n  return (\n    addAtRulePrefix(atRules.container, 'c') +\n    addAtRulePrefix(atRules.media, 'm') +\n    addAtRulePrefix(atRules.layer, 'l') +\n    addAtRulePrefix(atRules.supports, 's')\n  );\n}\n\nexport function hashPropertyKey(selector: string, property: string, atRules: AtRules): PropertyHash {\n  // uniq key based on property & selector, used for merging later\n  const computedKey = selector + atRulesToString(atRules) + property;\n\n  // \"key\" can be really long as it includes selectors, we use hashes to reduce sizes of keys\n  // \".foo :hover\" => \"abcd\"\n  const hashedKey = hash(computedKey);\n\n  // As these hashes are used as object keys in build output we should avoid having numbers as a first character to\n  // avoid having quotes:\n  // {\n  //   \"1abc\": {}, // we don't want this\n  //   Aabc: {}, // no quotes\n  // }\n  const firstCharCode = hashedKey.charCodeAt(0);\n  const startsWithNumber = firstCharCode >= 48 && firstCharCode <= 57;\n\n  if (startsWithNumber) {\n    return String.fromCharCode(firstCharCode + 17) + hashedKey.slice(1);\n  }\n\n  return hashedKey;\n}\n"],"names":["addAtRulePrefix","atRule","prefix","atRulesToString","atRules","container","media","layer","supports","hashPropertyKey","selector","property","computedKey","hashedKey","hash","firstCharCode","charCodeAt","startsWithNumber","String","fromCharCode","slice"],"mappings":";;AAKA,SAASA,eAAeA,CAACC,MAAc,EAAEC,MAAc,EAAA;AACrD,EAAA,OAAOD,MAAM,GAAGC,MAAM,GAAGD,MAAM,GAAGA,MAAM;AAC1C;AAEM,SAAUE,eAAeA,CAACC,OAAgB,EAAA;AAC9C,EAAA,OACEJ,eAAe,CAACI,OAAO,CAACC,SAAS,EAAE,GAAG,CAAC,GACvCL,eAAe,CAACI,OAAO,CAACE,KAAK,EAAE,GAAG,CAAC,GACnCN,eAAe,CAACI,OAAO,CAACG,KAAK,EAAE,GAAG,CAAC,GACnCP,eAAe,CAACI,OAAO,CAACI,QAAQ,EAAE,GAAG,CAAC;AAE1C;SAEgBC,eAAeA,CAACC,QAAgB,EAAEC,QAAgB,EAAEP,OAAgB,EAAA;AAClF;EACA,MAAMQ,WAAW,GAAGF,QAAQ,GAAGP,eAAe,CAACC,OAAO,CAAC,GAAGO,QAAQ;AAElE;AACA;AACA,EAAA,MAAME,SAAS,GAAGC,UAAI,CAACF,WAAW,CAAC;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA,EAAA,MAAMG,aAAa,GAAGF,SAAS,CAACG,UAAU,CAAC,CAAC,CAAC;EAC7C,MAAMC,gBAAgB,GAAGF,aAAa,IAAI,EAAE,IAAIA,aAAa,IAAI,EAAE;AAEnE,EAAA,IAAIE,gBAAgB,EAAE;AACpB,IAAA,OAAOC,MAAM,CAACC,YAAY,CAACJ,aAAa,GAAG,EAAE,CAAC,GAAGF,SAAS,CAACO,KAAK,CAAC,CAAC,CAAC;AACrE;AAEA,EAAA,OAAOP,SAAS;AAClB;;;;"}