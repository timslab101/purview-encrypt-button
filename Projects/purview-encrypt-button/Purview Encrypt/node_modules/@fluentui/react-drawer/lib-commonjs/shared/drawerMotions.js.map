{"version":3,"sources":["../src/shared/drawerMotions.ts"],"sourcesContent":["import { createPresenceComponent, motionTokens } from '@fluentui/react-motion';\nimport { tokens } from '@fluentui/react-theme';\nimport { ProviderContextValue_unstable as FluentProviderContextValue } from '@fluentui/react-shared-contexts';\n\nimport type { DrawerBaseProps } from './DrawerBase.types';\nimport { drawerCSSVars } from './useDrawerBaseStyles.styles';\n\nexport type DrawerMotionParams = Required<\n  Pick<DrawerBaseProps, 'size' | 'position'> & Pick<FluentProviderContextValue, 'dir'>\n>;\nexport type OverlayDrawerSurfaceMotionParams = Required<Pick<DrawerBaseProps, 'size'>>;\n\nconst durations: Record<NonNullable<DrawerBaseProps['size']>, number> = {\n  small: motionTokens.durationGentle,\n  medium: motionTokens.durationSlow,\n  large: motionTokens.durationSlower,\n  full: motionTokens.durationUltraSlow,\n};\n\n/**\n * @internal\n */\nexport function getPositionTransform(\n  position: DrawerBaseProps['position'],\n  sizeVar: string,\n  dir: FluentProviderContextValue['dir'],\n): string {\n  const leftToRightTransform = `translate3d(var(${sizeVar}), 0, 0)`;\n  const rightToLeftTransform = `translate3d(calc(var(${sizeVar}) * -1), 0, 0)`;\n  const bottomToTopTransform = `translate3d(0, var(${sizeVar}), 0)`;\n\n  if (position === 'start') {\n    return dir === 'ltr' ? rightToLeftTransform : leftToRightTransform;\n  }\n\n  if (position === 'end') {\n    return dir === 'ltr' ? leftToRightTransform : rightToLeftTransform;\n  }\n\n  if (position === 'bottom') {\n    return bottomToTopTransform;\n  }\n\n  return 'translate3d(0, 0, 0)';\n}\n\n/**\n * @internal\n */\nexport const InlineDrawerMotion = createPresenceComponent<DrawerMotionParams>(({ position, size, dir }) => {\n  const keyframes: Keyframe[] = [\n    {\n      /**\n       * TODO: Once the #31663 lands, we should update the RTL logic to use Motion APIs\n       * The work will be done in the #32817\n       */\n      transform: getPositionTransform(position, drawerCSSVars.drawerSizeVar, dir),\n      opacity: 0,\n    },\n    { transform: 'translate3d(0, 0, 0)', opacity: 1 },\n  ];\n  const duration = durations[size];\n\n  return {\n    enter: {\n      keyframes,\n      duration,\n      easing: motionTokens.curveDecelerateMid,\n    },\n    exit: {\n      keyframes: [...keyframes].reverse(),\n      duration,\n      easing: motionTokens.curveAccelerateMin,\n    },\n  };\n});\n\n/**\n * @internal\n */\nexport const OverlayDrawerMotion = createPresenceComponent<DrawerMotionParams>(({ position, size, dir }) => {\n  const keyframes: Keyframe[] = [\n    {\n      /**\n       * TODO: Once the #31663 lands, we should update the RTL logic to use Motion APIs\n       * The work will be done in the #32817\n       */\n      transform: getPositionTransform(position, drawerCSSVars.drawerSizeVar, dir),\n      boxShadow: `0px ${tokens.colorTransparentBackground}`,\n      opacity: 0,\n    },\n    {\n      transform: 'translate3d(0, 0, 0)',\n      boxShadow: tokens.shadow64,\n      opacity: 1,\n    },\n  ];\n  const duration = durations[size];\n\n  return {\n    enter: {\n      keyframes,\n      duration,\n      easing: motionTokens.curveDecelerateMid,\n    },\n    exit: {\n      keyframes: [...keyframes].reverse(),\n      duration,\n      easing: motionTokens.curveAccelerateMin,\n    },\n  };\n});\n\n/**\n * @internal\n */\nexport const OverlaySurfaceBackdropMotion = createPresenceComponent(({ size }: OverlayDrawerSurfaceMotionParams) => {\n  const keyframes = [{ opacity: 0 }, { opacity: 1 }];\n  const duration = durations[size];\n\n  return {\n    enter: {\n      keyframes,\n      easing: motionTokens.curveLinear,\n      duration,\n    },\n    exit: {\n      keyframes: [...keyframes].reverse(),\n      easing: motionTokens.curveLinear,\n      duration,\n    },\n  };\n});\n"],"names":["createPresenceComponent","motionTokens","tokens","drawerCSSVars","durations","small","durationGentle","medium","durationSlow","large","durationSlower","full","durationUltraSlow","getPositionTransform","position","sizeVar","dir","leftToRightTransform","rightToLeftTransform","bottomToTopTransform","InlineDrawerMotion","size","keyframes","transform","drawerSizeVar","opacity","duration","enter","easing","curveDecelerateMid","exit","reverse","curveAccelerateMin","OverlayDrawerMotion","boxShadow","colorTransparentBackground","shadow64","OverlaySurfaceBackdropMotion","curveLinear"],"mappings":";;;;;;;;;;;sBAiDaoB;eAAAA;;IA+BAa,mBAAAA;;;gCAoCAI;eAAAA;;wBA9FGxB;;;;6BAtBsC,yBAAyB;4BACxD,wBAAwB;2CAIjB,+BAA+B;AAO7D,MAAMT,YAAkE;IACtEC,OAAOJ,yBAAAA,CAAaK,cAAc;IAClCC,QAAQN,yBAAAA,CAAaO,YAAY;IACjCC,OAAOR,yBAAAA,CAAaS,cAAc;IAClCC,MAAMV,yBAAAA,CAAaW,iBAAiB;AACtC;AAKO,SAASC,qBACdC,QAAqC,EACrCC,OAAe,EACfC,GAAsC;IAEtC,MAAMC,uBAAuB,CAAC,gBAAgB,EAAEF,QAAQ,QAAQ,CAAC;IACjE,MAAMG,uBAAuB,CAAC,qBAAqB,EAAEH,QAAQ,cAAc,CAAC;IAC5E,MAAMI,uBAAuB,CAAC,mBAAmB,EAAEJ,QAAQ,KAAK,CAAC;IAEjE,IAAID,aAAa,SAAS;QACxB,OAAOE,QAAQ,QAAQE,uBAAuBD;IAChD;IAEA,IAAIH,aAAa,OAAO;QACtB,OAAOE,QAAQ,QAAQC,uBAAuBC;IAChD;IAEA,IAAIJ,aAAa,UAAU;QACzB,OAAOK;IACT;IAEA,OAAO;AACT;AAKO,+BAA2BnB,oCAAAA,EAA4C,CAAC,EAAEc,QAAQ,EAAEO,IAAI,EAAEL,GAAG,EAAE;IACpG,MAAMM,YAAwB;QAC5B;YACE;;;OAGC,GACDC,WAAWV,qBAAqBC,UAAUX,wCAAAA,CAAcqB,aAAa,EAAER;YACvES,SAAS;QACX;QACA;YAAEF,WAAW;YAAwBE,SAAS;QAAE;KACjD;IACD,MAAMC,WAAWtB,SAAS,CAACiB,KAAK;IAEhC,OAAO;QACLM,OAAO;YACLL;YACAI;YACAE,QAAQ3B,yBAAAA,CAAa4B,kBAAkB;QACzC;QACAC,MAAM;YACJR,WAAW;mBAAIA;aAAU,CAACS,OAAO;YACjCL;YACAE,QAAQ3B,yBAAAA,CAAa+B,kBAAkB;QACzC;IACF;AACF,GAAG;AAKI,4BAA4BhC,wCAAAA,EAA4C,CAAC,EAAEc,QAAQ,EAAEO,IAAI,EAAEL,GAAG,EAAE;IACrG,MAAMM,YAAwB;QAC5B;YACE;;;OAGC,GACDC,WAAWV,qBAAqBC,UAAUX,wCAAAA,CAAcqB,aAAa,EAAER;YACvEkB,WAAW,CAAC,IAAI,EAAEhC,kBAAAA,CAAOiC,0BAA0B,EAAE;YACrDV,SAAS;QACX;QACA;YACEF,WAAW;YACXW,WAAWhC,kBAAAA,CAAOkC,QAAQ;YAC1BX,SAAS;QACX;KACD;IACD,MAAMC,WAAWtB,SAAS,CAACiB,KAAK;IAEhC,OAAO;QACLM,OAAO;YACLL;YACAI;YACAE,QAAQ3B,yBAAAA,CAAa4B,kBAAkB;QACzC;QACAC,MAAM;YACJR,WAAW;mBAAIA;aAAU,CAACS,OAAO;YACjCL;YACAE,QAAQ3B,yBAAAA,CAAa+B,kBAAkB;QACzC;IACF;AACF,GAAG;AAKI,yCAAqChC,oCAAAA,EAAwB,CAAC,EAAEqB,IAAI,EAAoC;IAC7G,MAAMC,YAAY;QAAC;YAAEG,SAAS;QAAE;QAAG;YAAEA,SAAS;QAAE;KAAE;IAClD,MAAMC,WAAWtB,SAAS,CAACiB,KAAK;IAEhC,OAAO;QACLM,OAAO;YACLL;YACAM,QAAQ3B,yBAAAA,CAAaqC,WAAW;YAChCZ;QACF;QACAI,MAAM;YACJR,WAAW;mBAAIA;aAAU,CAACS,OAAO;YACjCH,QAAQ3B,yBAAAA,CAAaqC,WAAW;YAChCZ;QACF;IACF;AACF,GAAG"}