{"version":3,"sources":["../src/components/DataGridHeaderCell/useDataGridHeaderCell.ts"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { useFocusableGroup } from '@fluentui/react-tabster';\nimport { useEventCallback } from '@fluentui/react-utilities';\nimport type { DataGridHeaderCellProps, DataGridHeaderCellState } from './DataGridHeaderCell.types';\nimport { useTableHeaderCell_unstable } from '../TableHeaderCell/useTableHeaderCell';\nimport { useDataGridContext_unstable } from '../../contexts/dataGridContext';\nimport { useColumnIdContext } from '../../contexts/columnIdContext';\nimport { useTableContext } from '../../contexts/tableContext';\nimport { isColumnSortable } from '../../utils/isColumnSortable';\n\n/**\n * Create the state required to render DataGridHeaderCell.\n *\n * The returned state can be modified with hooks such as useDataGridHeaderCellStyles_unstable,\n * before being passed to renderDataGridHeaderCell_unstable.\n *\n * @param props - props from this instance of DataGridHeaderCell\n * @param ref - reference to root HTMLElement of DataGridHeaderCell\n */\nexport const useDataGridHeaderCell_unstable = (\n  props: DataGridHeaderCellProps,\n  ref: React.Ref<HTMLElement>,\n): DataGridHeaderCellState => {\n  const columnId = useColumnIdContext();\n  const { sortable: gridSortable } = useTableContext();\n  const toggleColumnSort = useDataGridContext_unstable(ctx => ctx.sort.toggleColumnSort);\n\n  const sortable = useDataGridContext_unstable(ctx => {\n    const columnSortable = !!ctx.columns.find(c => c.columnId === columnId && isColumnSortable(c));\n    if (!gridSortable) {\n      // if the grid is not sortable - disable sorting on all columns\n      return false;\n    }\n\n    return columnSortable;\n  });\n\n  const sortDirection = useDataGridContext_unstable(ctx =>\n    sortable ? ctx.sort.getSortDirection(columnId) : undefined,\n  );\n  const resizableColumns = useDataGridContext_unstable(ctx => ctx.resizableColumns);\n  const getTableHeaderCellProps = useDataGridContext_unstable(ctx => {\n    return ctx.columnSizing_unstable.getTableHeaderCellProps;\n  });\n\n  const { focusMode = sortable ? 'none' : 'cell' } = props;\n  const focusableGroupAttr = useFocusableGroup({ tabBehavior: 'limited-trap-focus' });\n\n  // eslint-disable-next-line @typescript-eslint/no-deprecated -- prefer HTMLTableCellElement\n  const onClick = useEventCallback((e: React.MouseEvent<HTMLTableHeaderCellElement>) => {\n    if (sortable) {\n      toggleColumnSort(e, columnId);\n    }\n    props.onClick?.(e);\n  });\n\n  return useTableHeaderCell_unstable(\n    {\n      sortable,\n      sortDirection,\n      as: 'div',\n      tabIndex: focusMode !== 'none' ? 0 : undefined,\n      ...(focusMode === 'group' && focusableGroupAttr),\n      ...(resizableColumns ? getTableHeaderCellProps(columnId) : {}),\n      ...props,\n      onClick,\n    },\n    ref,\n  );\n};\n"],"names":["React","useFocusableGroup","useEventCallback","useTableHeaderCell_unstable","useDataGridContext_unstable","useColumnIdContext","useTableContext","isColumnSortable","useDataGridHeaderCell_unstable","props","ref","columnId","sortable","gridSortable","toggleColumnSort","ctx","sort","columnSortable","columns","find","c","sortDirection","getSortDirection","undefined","resizableColumns","getTableHeaderCellProps","columnSizing_unstable","focusMode","focusableGroupAttr","tabBehavior","onClick","e","as","tabIndex"],"mappings":"AAAA;;;;;+BAqBaQ;;;;;;;iEAnBU,QAAQ;8BACG,0BAA0B;gCAC3B,4BAA4B;oCAEjB,wCAAwC;iCACxC,iCAAiC;iCAC1C,iCAAiC;8BACpC,8BAA8B;kCAC7B,+BAA+B;AAWzD,uCAAuC,CAC5CC,OACAC;IAEA,MAAMC,eAAWN,mCAAAA;IACjB,MAAM,EAAEO,UAAUC,YAAY,EAAE,OAAGP,6BAAAA;IACnC,MAAMQ,mBAAmBV,gDAAAA,EAA4BW,CAAAA,MAAOA,IAAIC,IAAI,CAACF,gBAAgB;IAErF,MAAMF,eAAWR,4CAAAA,EAA4BW,CAAAA;QAC3C,MAAME,iBAAiB,CAAC,CAACF,IAAIG,OAAO,CAACC,IAAI,CAACC,CAAAA,IAAKA,EAAET,QAAQ,KAAKA,gBAAYJ,kCAAAA,EAAiBa;QAC3F,IAAI,CAACP,cAAc;YACjB,+DAA+D;YAC/D,OAAO;QACT;QAEA,OAAOI;IACT;IAEA,MAAMI,oBAAgBjB,4CAAAA,EAA4BW,CAAAA,MAChDH,WAAWG,IAAIC,IAAI,CAACM,gBAAgB,CAACX,YAAYY;IAEnD,MAAMC,uBAAmBpB,4CAAAA,EAA4BW,CAAAA,MAAOA,IAAIS,gBAAgB;IAChF,MAAMC,8BAA0BrB,4CAAAA,EAA4BW,CAAAA;QAC1D,OAAOA,IAAIW,qBAAqB,CAACD,uBAAuB;IAC1D;IAEA,MAAM,EAAEE,YAAYf,WAAW,SAAS,MAAM,EAAE,GAAGH;IACnD,MAAMmB,yBAAqB3B,+BAAAA,EAAkB;QAAE4B,aAAa;IAAqB;IAEjF,2FAA2F;IAC3F,MAAMC,cAAU5B,gCAAAA,EAAiB,CAAC6B;YAIhCtB;QAHA,IAAIG,UAAU;YACZE,iBAAiBiB,GAAGpB;QACtB;SACAF,iBAAAA,MAAMqB,OAAAA,AAAO,MAAA,QAAbrB,mBAAAA,KAAAA,IAAAA,KAAAA,IAAAA,eAAAA,IAAAA,CAAAA,OAAgBsB;IAClB;IAEA,WAAO5B,+CAAAA,EACL;QACES;QACAS;QACAW,IAAI;QACJC,UAAUN,cAAc,SAAS,IAAIJ;QACrC,GAAII,cAAc,WAAWC,kBAAkB;QAC/C,GAAIJ,mBAAmBC,wBAAwBd,YAAY,CAAC,CAAC;QAC7D,GAAGF,KAAK;QACRqB;IACF,GACApB;AAEJ,EAAE"}