{"version":3,"sources":["../src/components/TagPickerButton/useTagPickerButton.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { useActiveDescendantContext } from '@fluentui/react-aria';\nimport type { TagPickerButtonProps, TagPickerButtonState } from './TagPickerButton.types';\nimport { useTagPickerContext_unstable } from '../../contexts/TagPickerContext';\nimport { useButtonTriggerSlot } from '@fluentui/react-combobox';\n\n/**\n * Create the state required to render PickerButton.\n *\n * The returned state can be modified with hooks such as usePickerButtonStyles_unstable,\n * before being passed to renderPickerButton_unstable.\n *\n * @param props - props from this instance of PickerButton\n * @param ref - reference to root HTMLDivElement of PickerButton\n */\nexport const useTagPickerButton_unstable = (\n  props: TagPickerButtonProps,\n  ref: React.Ref<HTMLButtonElement>,\n): TagPickerButtonState => {\n  const { controller: activeDescendantController } = useActiveDescendantContext();\n  const triggerRef = useTagPickerContext_unstable(ctx => ctx.triggerRef);\n  const open = useTagPickerContext_unstable(ctx => ctx.open);\n  const value = useTagPickerContext_unstable(ctx => ctx.value);\n  const hasSelectedOption = useTagPickerContext_unstable(ctx => ctx.selectedOptions.length > 0);\n  const popoverId = useTagPickerContext_unstable(ctx => ctx.popoverId);\n  const getOptionById = useTagPickerContext_unstable(ctx => ctx.getOptionById);\n  const selectOption = useTagPickerContext_unstable(ctx => ctx.selectOption);\n  const setHasFocus = useTagPickerContext_unstable(ctx => ctx.setHasFocus);\n  const setOpen = useTagPickerContext_unstable(ctx => ctx.setOpen);\n\n  // casting is required here as triggerRef can either be button or input,\n  // but in this case we can assure it's a button\n  const root = useButtonTriggerSlot(props, triggerRef as React.RefObject<HTMLButtonElement>, {\n    activeDescendantController,\n    defaultProps: {\n      type: 'button',\n      tabIndex: 0,\n      children:\n        value ||\n        // @ts-expect-error - FIXME: TS2339: Property 'placeholder' does not exist on type 'TagPickerButtonProps'\n        props.placeholder,\n      'aria-controls': open ? popoverId : undefined,\n      ref,\n    },\n    state: {\n      getOptionById,\n      open,\n      selectOption,\n      setHasFocus,\n      setOpen,\n      multiselect: true,\n    },\n  });\n\n  const size = useTagPickerContext_unstable(ctx => ctx.size);\n\n  const state: TagPickerButtonState = {\n    components: {\n      root: 'button',\n    },\n    root,\n    size,\n    hasSelectedOption,\n  };\n\n  return state;\n};\n"],"names":["React","useActiveDescendantContext","useTagPickerContext_unstable","useButtonTriggerSlot","useTagPickerButton_unstable","props","ref","controller","activeDescendantController","triggerRef","ctx","open","value","hasSelectedOption","selectedOptions","length","popoverId","getOptionById","selectOption","setHasFocus","setOpen","root","defaultProps","type","tabIndex","children","placeholder","undefined","state","multiselect","size","components"],"mappings":"AAAA;;;;;+BAiBaI;;;;;;;iEAfU,QAAQ;2BACY,uBAAuB;kCAErB,kCAAkC;+BAC1C,2BAA2B;AAWzD,oCAAoC,CACzCC,OACAC;IAEA,MAAM,EAAEC,YAAYC,0BAA0B,EAAE,OAAGP,qCAAAA;IACnD,MAAMQ,iBAAaP,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAID,UAAU;IACrE,MAAME,WAAOT,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIC,IAAI;IACzD,MAAMC,YAAQV,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIE,KAAK;IAC3D,MAAMC,wBAAoBX,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAII,eAAe,CAACC,MAAM,GAAG;IAC3F,MAAMC,gBAAYd,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIM,SAAS;IACnE,MAAMC,gBAAgBf,kDAAAA,EAA6BQ,CAAAA,MAAOA,IAAIO,aAAa;IAC3E,MAAMC,mBAAehB,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIQ,YAAY;IACzE,MAAMC,kBAAcjB,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIS,WAAW;IACvE,MAAMC,cAAUlB,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIU,OAAO;IAE/D,wEAAwE;IACxE,+CAA+C;IAC/C,MAAMC,WAAOlB,mCAAAA,EAAqBE,OAAOI,YAAkD;QACzFD;QACAc,cAAc;YACZC,MAAM;YACNC,UAAU;YACVC,UACEb,SACA,yGAAyG;YACzGP,MAAMqB,WAAW;YACnB,iBAAiBf,OAAOK,YAAYW;YACpCrB;QACF;QACAsB,OAAO;YACLX;YACAN;YACAO;YACAC;YACAC;YACAS,aAAa;QACf;IACF;IAEA,MAAMC,WAAO5B,8CAAAA,EAA6BQ,CAAAA,MAAOA,IAAIoB,IAAI;IAEzD,MAAMF,QAA8B;QAClCG,YAAY;YACVV,MAAM;QACR;QACAA;QACAS;QACAjB;IACF;IAEA,OAAOe;AACT,EAAE"}